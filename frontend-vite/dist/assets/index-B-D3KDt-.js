(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}})();function b(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function y(e){return e.length>=8}function S(e,o){localStorage.setItem(e,o)}function I(e){return localStorage.getItem(e)}function h(e){localStorage.removeItem(e)}function L(){const e=document.querySelector("#loginTab form"),o=document.querySelector("#signupTab form"),r=document.querySelector("#rememberMe"),n=I("email");if(n&&e){const s=e.querySelector('input[type="email"]');s&&(s.value=n,r&&(r.checked=!0))}e?.addEventListener("submit",s=>{s.preventDefault();const a=e.querySelector('input[type="email"]').value.trim(),u=e.querySelector('input[type="password"]').value;if(!b(a)||!y(u)){l("Invalide login details","danger");return}const c=JSON.parse(localStorage.getItem("accounts")||"[]").find(d=>d.email===a&&d.password===u);if(!c){l("Invalid email or password.","danger");return}localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userFirstName",c.firstName),localStorage.setItem("userEmail",c.email),f(e,!0),l(`Welcome back, ${c.firstName}! Login successful.`,"success"),setTimeout(()=>{window.location.assign("/index.html"),f(e,!1),e.reset()},1200),r?.checked?S("email",a):h("email")}),o?.addEventListener("submit",s=>{s.preventDefault();const a=o.querySelectorAll("input"),u=a[0]?.value.trim()||"",m=a[1]?.value.trim()||"",c=a[2]?.value||"",d=a[3]?.value||"";if(!u||!b(m)||!y(c)||c!==d){l("Invalid signup details","danger");return}const p=u.split(" ")[0]||"",g=JSON.parse(localStorage.getItem("accounts")||"[]");if(g.some(v=>v.email===m)){l("Email already registered.","danger");return}f(o,!0),g.push({email:m,firstName:p,password:c}),localStorage.setItem("accounts",JSON.stringify(g)),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userFirstName",p),localStorage.setItem("userEmail",m),l("Account created successful.","success"),setTimeout(()=>{f(o,!1),o.reset()},1200)}),document.querySelectorAll("#authTabs button").forEach(s=>s.addEventListener("click",()=>{e?.reset(),o?.reset()})),document.querySelectorAll('input[type="password"]').forEach(s=>{const a=document.createElement("span");a.className="bi bi-eye-slash position-absolute end-0 me-3 text-muted",a.style.cursor="pointer",s.parentElement?.classList.add("position-relative"),s.parentElement?.appendChild(a),a.addEventListener("click",()=>{s.type==="password"?(s.type="text",a.className="bi bi-eye position-absolute end-0 me-3 text-muted"):(s.type="password",a.className="bi bi-eye-slash position-absolute end-0 me-3 text-muted")})})}function f(e,o){const r=e.querySelector('button[type="submit"]');r&&(r.disabled=o,r.innerText=o?"Processing...":r.getAttribute("data-label")||"Submit")}function l(e,o){const r="toast-container";let n=document.getElementById(r);n||(n=document.createElement("div"),n.id=r,n.className="toast-container position-fixed bottom-0 end-0 p-3",document.body.appendChild(n));const t=document.createElement("div");t.className=`toast align-items-center text-bg-${o} border-0 show mb-2`,t.role="alert",t.innerHTML=`
        <div class="d-flex">
            <div class="toast-body">${e}</div>
            <button type="button" class="btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    `,n.appendChild(t),setTimeout(()=>t.remove(),3e3)}function w(){const e=document.querySelector(".nav-link.account"),o=document.querySelectorAll(".offcanvas a"),r=localStorage.getItem("isLoggedIn")==="true",n=localStorage.getItem("userFirstName");r&&n&&(e&&(e.innerHTML=`<i class="bi bi-person"></i> ${n}`),o.forEach(t=>{t.textContent?.includes("Login / Signup")&&(t.innerHTML='<i class="bi bi-box-arrow-right me-2"></i> Logout',t.href="#",t.addEventListener("click",i=>{i.preventDefault(),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userFirstName"),window.location.reload()}))}))}L();w();
